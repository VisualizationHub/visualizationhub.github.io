<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Charts js Graph Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/tui-chart.min.css">
    <script src="js/jquery-3.3.1.min.js" type='text/javascript'></script>

    <!--Chart.js-->
    <script src="js/Chart.min.js"></script>
    <script type='text/javascript' src='js/tui-code-snippet.min.js'></script>
    <script type='text/javascript' src='js/raphael.min.js'></script>
    <script src="js/tui-chart.min.js"></script>
    <script src="js/lodash.min.js"></script>

    <script>
        var topArticleData = [{
            "category": "ASP.NET",
            "url": "https://www.c-sharpcorner.com/technologies/asp-dot-net-programming",
            "categoryData": [{
                "categoryType": "Articles",
                "count": "4256"
            }, {
                "categoryType": "Blogs",
                "count": "1380"
            }, {
                "categoryType": "Links",
                "count": "111"
            }, {
                "categoryType": "Videos",
                "count": "77"
            }, {
                "categoryType": "News",
                "count": "18"
            }]
        }, {
            "category": "SharePoint",
            "url": "https://www.c-sharpcorner.com/technologies/sharepoint",
            "categoryData": [{
                "categoryType": "Articles",
                "count": "3944"
            }, {
                "categoryType": "Blogs",
                "count": "2318"
            }, {
                "categoryType": "Links",
                "count": "54"
            }, {
                "categoryType": "Videos",
                "count": "37"
            }, {
                "categoryType": "News",
                "count": "22"
            }]
        }, {
            "category": "C#",
            "url": "https://www.c-sharpcorner.com/technologies/csharp-programming",
            "categoryData": [{
                "categoryType": "Articles",
                "count": "2567"
            }, {
                "categoryType": "Blogs",
                "count": "1684"
            }, {
                "categoryType": "Links",
                "count": "71"
            }, {
                "categoryType": "Videos",
                "count": "98"
            }, {
                "categoryType": "News",
                "count": "14"
            }]
        }, {
            "category": "Azure",
            "url": "https://www.c-sharpcorner.com/technologies/azure",
            "categoryData": [{
                "categoryType": "Articles",
                "count": "1491"
            }, {
                "categoryType": "Blogs",
                "count": "174"
            }, {
                "categoryType": "Links",
                "count": "62"
            }, {
                "categoryType": "Videos",
                "count": "90"
            }, {
                "categoryType": "News",
                "count": "141"
            }]
        }, {
            "category": "SQL Server",
            "url": "https://www.c-sharpcorner.com/technologies/sql-server",
            "categoryData": [{
                "categoryType": "Articles",
                "count": "1205"
            }, {
                "categoryType": "Blogs",
                "count": "1175"
            }, {
                "categoryType": "Links",
                "count": "62"
            }, {
                "categoryType": "Videos",
                "count": "25"
            }, {
                "categoryType": "News",
                "count": "25"
            }]
        }, {
            "category": "Angular",
            "url": "https://www.c-sharpcorner.com/technologies/angularjs",
            "categoryData": [{
                "categoryType": "Articles",
                "count": "1000"
            }, {
                "categoryType": "Blogs",
                "count": "269"
            }, {
                "categoryType": "Links",
                "count": "14"
            }, {
                "categoryType": "Videos",
                "count": "41"
            }, {
                "categoryType": "News",
                "count": "14"
            }]
        }, {
            "category": "Windows 10",
            "url": "https://www.c-sharpcorner.com/technologies/windows_10",
            "categoryData": [{
                "categoryType": "Articles",
                "count": "915"
            }, {
                "categoryType": "Blogs",
                "count": "114"
            }, {
                "categoryType": "Links",
                "count": "46"
            }, {
                "categoryType": "Videos",
                "count": "24"
            }, {
                "categoryType": "News",
                "count": "312"
            }]
        }, {
            "category": "UWP",
            "url": "https://www.c-sharpcorner.com/technologies/universal-windows-apps",
            "categoryData": [{
                "categoryType": "Articles",
                "count": "887"
            }, {
                "categoryType": "Blogs",
                "count": "86"
            }, {
                "categoryType": "Links",
                "count": "28"
            }, {
                "categoryType": "Videos",
                "count": "9"
            }, {
                "categoryType": "News",
                "count": "18"
            }]
        }, {
            "category": ".NET",
            "url": "https://www.c-sharpcorner.com/technologies/dot_net_2015",
            "categoryData": [{
                "categoryType": "Articles",
                "count": "818"
            }, {
                "categoryType": "Blogs",
                "count": "710"
            }, {
                "categoryType": "Links",
                "count": "332"
            }, {
                "categoryType": "Videos",
                "count": "91"
            }, {
                "categoryType": "News",
                "count": "93"
            }]
        }, {
            "category": "Visual Studio",
            "url": "https://www.c-sharpcorner.com/technologies/visual-studio",
            "categoryData": [{
                "categoryType": "Articles",
                "count": "737"
            }, {
                "categoryType": "Blogs",
                "count": "231"
            }, {
                "categoryType": "Links",
                "count": "51"
            }, {
                "categoryType": "Videos",
                "count": "73"
            }, {
                "categoryType": "News",
                "count": "115"
            }]
        }];
    </script>
    <script>
        $(document).ready(function() {
            console.log("Dom is ready");
            // Common chartOption for Tui Charts 
            var chartOptions = {
                chartExportMenu: {
                    visible: false // default is true.
                },
                chart: {
                    width: 470,
                    height: 250,
                    title: 'C-SharpCorner Articles Technology Category',
                    format: '1,000'
                },
                yAxis: {
                    title: 'Y Axis'
                },
                xAxis: {
                    title: 'X Axis',
                    min: 0,
                    //max: 9000,
                    // suffix: '$'
                },
                series: {
                    showLabel: true
                }
            };

            //Sub Category
            var categoryData = ["Articles", "Blogs", "Links", "Videos", "News"];

            // Generate series data based on sub Category
            var data = {
                // categories: _.pluck(topData,'category'),
                categories: ["Articles"],
                series: _.map(topArticleData, function(e) {
                    //Calculate Article count in each category
                    var ele = _.find(e.categoryData, function(e) {
                        return e.categoryType === "Articles" ? e.count : 0;
                    });
                    return {
                        name: e.category,
                        data: parseInt(ele.count)
                    };
                })
            };

            //Update Json nested proprties using Lodash
            _.set(chartOptions, "chart.title", 'C-SharpCorner Top 10 Contribution by Articles Count');

            //Draw tui Bar Charts
            tui.chart.barChart(document.getElementById("tui-chart1"), data, chartOptions);

            var data = {
                // categories: _.pluck(topData,'category'),
                categories: ["Blogs"],
                series: _.map(topArticleData, function(e) {
                    var ele = _.find(e.categoryData, function(e) {
                        return e.categoryType === "Blogs" ? e.count : 0;
                    });
                    return {
                        name: e.category,
                        data: parseInt(ele.count)
                    };
                })
            };
            _.set(chartOptions, "chart.title", 'C-SharpCorner Top 10 Contribution by Blogs Count');

            tui.chart.barChart(document.getElementById("tui-chart2"), data, chartOptions);
            var seriesData = _.map(topArticleData, function(e) {
                var ele = _.find(e.categoryData, function(e) {
                    return e.categoryType === "News" ? e.count : 0;
                });
                return {
                    name: e.category,
                    data: parseInt(ele.count)
                };
            });
            console.log(seriesData);
            var data = {
                // categories: _.pluck(topData,'category'),
                categories: ["News"],
                series: seriesData
            };
            _.set(chartOptions, "chart.title", 'C-SharpCorner Top 10 Contribution by News Count');
            tui.chart.columnChart(document.getElementById("tui-chart3"), data, chartOptions);


            seriesData = _.map(topArticleData, function(e) {
                var ele = _.find(e.categoryData, function(e) {
                    return e.categoryType === "News" ? e.count : 0;
                });
                return {
                    label: e.category,
                    data: [parseInt(ele.count)]
                };
            });
            console.log(seriesData);
            getBarChartJs({
                Id: "chart1",
                data: seriesData
            })
        });
        var getBarChartJs = function(element) {
            var data = {
                labels: ['Articles'],
                datasets: element.data
            }

            var options = {
                scales: {
                    yAxes: [{
                        //	stacked:true,
                        gridLines: {
                            display: true,
                            color: "rgba(255,99,132,0.2)"
                        }
                    }],
                    xAxes: [{
                        stacked: false,
                        gridLines: {
                            display: false
                        }
                    }]
                }
            };


            var ctx = document.getElementById(element.Id);
            //console.log(ctx);

            new Chart(ctx, {
                type: element.isRotate === undefined ? "bar" : element.isRotate, //'bar',//'horizontalBar', for rotate charts
                data: data,
                options: options
            });
        }
    </script>

</head>

<body>
    <h3>Sample TUI Bar charts </h3>

    <p>

    </p>
    <!-- Canvas or chart.js chart must be wrapped with its parent containing width or height-->
    <div style="width:500px;height:350px;">
        <canvas id="chart1" height="200px"></canvas>
    </div>
    <!-- TUI CHARTS DEMO -->
    <br/>
    <div id="tui-chart1"></div>
    <br/>
    <div id="tui-chart2"></div>
    <br/>
    <div id="tui-chart3"></div>
    <br/>

</body>

</html>